import{s as Ce,o as $e,d as ge,n as we,r as ke}from"../chunks/scheduler.B-KQ0TV-.js";import{S as Ee,i as xe,m as Y,n as ee,o as te,k as le,l as se,p as ne,q as be,e as h,s as A,c as m,a as I,f as R,d as v,r as i,g as O,h as a,t as M,u as K,b as B,v as H,w as j,x as Se,y as ye,j as ce}from"../chunks/index.BVfQ5-ZG.js";import{e as he}from"../chunks/spread.DK-xpwbU.js";import{E as Ne,a as De,b as me}from"../chunks/EtudeCard.dldt9bLf.js";const Ie=[{currentColor:"w",directions:"ESWN",newColors:"bbbb"},{currentColor:"b",directions:"WNES",newColors:"wwww"}];function Te(){return{currentColor:"",directions:"",newColors:""}}function ve(r,t,l){const e=r.slice();return e[15]=t[l],e[17]=l,e}function Ae(r){let t,l;return{c(){t=h("div"),l=h("canvas"),this.h()},l(e){t=m(e,"DIV",{class:!0});var s=I(t);l=m(s,"CANVAS",{width:!0,height:!0}),I(l).forEach(v),s.forEach(v),this.h()},h(){i(l,"width",Q),i(l,"height",Q),i(t,"class","canvas-container svelte-1b2x6k8")},m(e,s){O(e,t,s),a(t,l),r[5](l)},p:we,d(e){e&&v(t),r[5](null)}}}function _e(r){let t,l,e,s=r[15].currentColor+"",u,c,n=r[15].directions+"",b,S,_=r[15].newColors+"",V,y,x,w="×",U,N,P;function f(){return r[6](r[17])}return{c(){t=h("div"),l=h("div"),e=M("If "),u=M(s),c=M(" → Turn "),b=M(n),S=M(" → New "),V=M(_),y=A(),x=h("button"),x.textContent=w,U=A(),this.h()},l($){t=m($,"DIV",{class:!0});var d=I(t);l=m(d,"DIV",{class:!0});var k=I(l);e=B(k,"If "),u=B(k,s),c=B(k," → Turn "),b=B(k,n),S=B(k," → New "),V=B(k,_),y=R(k),x=m(k,"BUTTON",{class:!0,"data-svelte-h":!0}),K(x)!=="svelte-wmeij0"&&(x.textContent=w),k.forEach(v),U=R(d),d.forEach(v),this.h()},h(){i(x,"class","delete-btn svelte-1b2x6k8"),i(l,"class","rule-display svelte-1b2x6k8"),i(t,"class","rule-item svelte-1b2x6k8")},m($,d){O($,t,d),a(t,l),a(l,e),a(l,u),a(l,c),a(l,b),a(l,S),a(l,V),a(l,y),a(l,x),a(t,U),N||(P=j(x,"click",f),N=!0)},p($,d){r=$,d&1&&s!==(s=r[15].currentColor+"")&&ce(u,s),d&1&&n!==(n=r[15].directions+"")&&ce(b,n),d&1&&_!==(_=r[15].newColors+"")&&ce(V,_)},d($){$&&v(t),N=!1,P()}}}function Re(r){let t,l,e,s,u="Add Rule",c,n,b,S,_,V,y,x,w,U,N,P,f,$,d,k='<button type="submit" class="game-button svelte-1b2x6k8">Add Rule</button>',F,C,L,J="Steps",W,D,X,z,q,fe="Run Simulation",re,de,G=he(r[0]),g=[];for(let o=0;o<G.length;o+=1)g[o]=_e(ve(r,G,o));return{c(){t=h("div");for(let o=0;o<g.length;o+=1)g[o].c();l=A(),e=h("form"),s=h("h4"),s.textContent=u,c=A(),n=h("div"),b=h("label"),S=M(`Current Color:
							`),_=h("input"),V=A(),y=h("label"),x=M(`Directions:
							`),w=h("input"),U=A(),N=h("label"),P=M(`New Colors:
							`),f=h("input"),$=A(),d=h("div"),d.innerHTML=k,F=A(),C=h("div"),L=h("h4"),L.textContent=J,W=A(),D=h("input"),X=A(),z=h("div"),q=h("button"),q.textContent=fe,this.h()},l(o){t=m(o,"DIV",{class:!0});var E=I(t);for(let ue=0;ue<g.length;ue+=1)g[ue].l(E);E.forEach(v),l=R(o),e=m(o,"FORM",{class:!0});var p=I(e);s=m(p,"H4",{class:!0,"data-svelte-h":!0}),K(s)!=="svelte-df5gq5"&&(s.textContent=u),c=R(p),n=m(p,"DIV",{class:!0});var T=I(n);b=m(T,"LABEL",{class:!0});var oe=I(b);S=B(oe,`Current Color:
							`),_=m(oe,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),oe.forEach(v),V=R(T),y=m(T,"LABEL",{class:!0});var ae=I(y);x=B(ae,`Directions:
							`),w=m(ae,"INPUT",{type:!0,placeholder:!0,class:!0}),ae.forEach(v),U=R(T),N=m(T,"LABEL",{class:!0});var ie=I(N);P=B(ie,`New Colors:
							`),f=m(ie,"INPUT",{type:!0,placeholder:!0,class:!0}),ie.forEach(v),$=R(T),d=m(T,"DIV",{class:!0,"data-svelte-h":!0}),K(d)!=="svelte-1918fq7"&&(d.innerHTML=k),T.forEach(v),p.forEach(v),F=R(o),C=m(o,"DIV",{class:!0});var Z=I(C);L=m(Z,"H4",{class:!0,"data-svelte-h":!0}),K(L)!=="svelte-13sp36r"&&(L.textContent=J),W=R(Z),D=m(Z,"INPUT",{type:!0,min:!0,max:!0,class:!0}),X=R(Z),z=m(Z,"DIV",{class:!0});var pe=I(z);q=m(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),K(q)!=="svelte-5683t2"&&(q.textContent=fe),pe.forEach(v),Z.forEach(v),this.h()},h(){i(t,"class","rules-list svelte-1b2x6k8"),i(s,"class","svelte-1b2x6k8"),i(_,"type","text"),i(_,"placeholder","w/b"),i(_,"maxlength","1"),i(_,"class","input-small svelte-1b2x6k8"),i(b,"class","svelte-1b2x6k8"),i(w,"type","text"),i(w,"placeholder","NESW"),i(w,"class","input-small svelte-1b2x6k8"),i(y,"class","svelte-1b2x6k8"),i(f,"type","text"),i(f,"placeholder","wwbb"),i(f,"class","input-small svelte-1b2x6k8"),i(N,"class","svelte-1b2x6k8"),i(d,"class","button-container svelte-1b2x6k8"),i(n,"class","rule-inputs svelte-1b2x6k8"),i(e,"class","add-rule-form svelte-1b2x6k8"),i(L,"class","svelte-1b2x6k8"),i(D,"type","number"),i(D,"min","1"),i(D,"max","100000"),i(D,"class","input-small svelte-1b2x6k8"),i(q,"class","game-button svelte-1b2x6k8"),i(z,"class","button-container svelte-1b2x6k8"),i(C,"class","simulation-controls svelte-1b2x6k8")},m(o,E){O(o,t,E);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(t,null);O(o,l,E),O(o,e,E),a(e,s),a(e,c),a(e,n),a(n,b),a(b,S),a(b,_),H(_,r[2].currentColor),a(n,V),a(n,y),a(y,x),a(y,w),H(w,r[2].directions),a(n,U),a(n,N),a(N,P),a(N,f),H(f,r[2].newColors),a(n,$),a(n,d),O(o,F,E),O(o,C,E),a(C,L),a(C,W),a(C,D),H(D,r[1]),a(C,X),a(C,z),a(z,q),re||(de=[j(_,"input",r[7]),j(w,"input",r[8]),j(f,"input",r[9]),j(e,"submit",Se(r[10])),j(D,"input",r[11]),j(q,"click",r[4])],re=!0)},p(o,E){if(E&1){G=he(o[0]);let p;for(p=0;p<G.length;p+=1){const T=ve(o,G,p);g[p]?g[p].p(T,E):(g[p]=_e(T),g[p].c(),g[p].m(t,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=G.length}E&4&&_.value!==o[2].currentColor&&H(_,o[2].currentColor),E&4&&w.value!==o[2].directions&&H(w,o[2].directions),E&4&&f.value!==o[2].newColors&&H(f,o[2].newColors),E&2&&be(D.value)!==o[1]&&H(D,o[1])},d(o){o&&(v(t),v(l),v(e),v(F),v(C)),ye(g,o),re=!1,ke(de)}}}function Ve(r){let t,l,e,s,u;return l=new me({props:{title:"Visualization",$$slots:{default:[Ae]},$$scope:{ctx:r}}}),s=new me({props:{title:"Rules",$$slots:{default:[Re]},$$scope:{ctx:r}}}),{c(){t=h("div"),Y(l.$$.fragment),e=A(),Y(s.$$.fragment),this.h()},l(c){t=m(c,"DIV",{class:!0});var n=I(t);ee(l.$$.fragment,n),e=R(n),ee(s.$$.fragment,n),n.forEach(v),this.h()},h(){i(t,"class","etude-grid")},m(c,n){O(c,t,n),te(l,t,null),a(t,e),te(s,t,null),u=!0},p(c,n){const b={};n&262152&&(b.$$scope={dirty:n,ctx:c}),l.$set(b);const S={};n&262151&&(S.$$scope={dirty:n,ctx:c}),s.$set(S)},i(c){u||(le(l.$$.fragment,c),le(s.$$.fragment,c),u=!0)},o(c){se(l.$$.fragment,c),se(s.$$.fragment,c),u=!1},d(c){c&&v(t),ne(l),ne(s)}}}function Le(r){let t,l;return t=new De({props:{title:"Simulation",$$slots:{default:[Ve]},$$scope:{ctx:r}}}),{c(){Y(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,s){te(t,e,s),l=!0},p(e,s){const u={};s&262159&&(u.$$scope={dirty:s,ctx:e}),t.$set(u)},i(e){l||(le(t.$$.fragment,e),l=!0)},o(e){se(t.$$.fragment,e),l=!1},d(e){ne(t,e)}}}function Ue(r){let t,l;return t=new Ne({props:{title:"Ants",description:"Simulate the movement of an ant on an infinite plane according to specified rules (its 'DNA'), and determine its final position after a given number of steps. Each rule specifies how the ant should turn and what color to leave behind based on the current color it encounters.",$$slots:{default:[Le]},$$scope:{ctx:r}}}),{c(){Y(t.$$.fragment)},l(e){ee(t.$$.fragment,e)},m(e,s){te(t,e,s),l=!0},p(e,[s]){const u={};s&262159&&(u.$$scope={dirty:s,ctx:e}),t.$set(u)},i(e){l||(le(t.$$.fragment,e),l=!0)},o(e){se(t.$$.fragment,e),l=!1},d(e){ne(t,e)}}}const Q=300;function Me(r,t,l){let e=[...Ie],s=11e3,u=Te(),c,n;const b=Q/2;$e(()=>{n=c.getContext("2d"),S()});function S(){n&&(n.fillStyle="#ffffff",n.fillRect(0,0,Q,Q))}function _(){if(!n)return;S();let f={x:b,y:b},$=0,d=new Map,k=new Map,F=e[0]?.currentColor||"w";e.forEach(C=>{k.set(C.currentColor,{dirs:C.directions,symbols:C.newColors})});for(let C=0;C<s;C++){const L=`${f.x},${f.y}`,J=d.get(L)||F,W=k.get(J);if(!W)continue;n.fillStyle=J==="w"?"#ffffff":"#000000",n.fillRect(f.x-1,f.y-1,2,2);const D=W.symbols[$];switch(d.set(L,D),$="NESW".indexOf(W.dirs[$]),$){case 0:f.y--;break;case 1:f.x++;break;case 2:f.y++;break;case 3:f.x--;break}}}function V(f){ge[f?"unshift":"push"](()=>{c=f,l(3,c)})}const y=f=>l(0,e=e.filter(($,d)=>d!==f));function x(){u.currentColor=this.value,l(2,u)}function w(){u.directions=this.value,l(2,u)}function U(){u.newColors=this.value,l(2,u)}const N=()=>{u.currentColor&&u.directions&&u.newColors&&(l(0,e=[...e,{...u}]),l(2,u={currentColor:"",directions:"",newColors:""}))};function P(){s=be(this.value),l(1,s)}return[e,s,u,c,_,V,y,x,w,U,N,P]}class Oe extends Ee{constructor(t){super(),xe(this,t,Me,Ue,Ce,{})}}export{Oe as component};
